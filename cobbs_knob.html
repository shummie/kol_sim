<html>
<head>
<link rel="stylesheet" type="text/css" href="interface.css" />
<script src="plotly-latest.min.js"></script>

</head>
<body>

<h2>Level 5 Quest: The King of Cobb's Knob Quest</h2>
<hr>

<p>
<b>Quest Description</b>
<hr>
The main goal of this quest is to defeat the Knob Goblin King in Cobb's Knob.
<p>
You first need to adventure in the Outskirts of Cobb's Knob until you get the Knob Goblin Encryption Key. You will encounter this adventure on your 11th adventure in the zone.
<p>
The zone opens up as you either defeat screambats, or use sonar-in-a-biscuits which are dropped by various bats throughout the various sub zones.
<p>
Three zones need to be opened up in order to access The Boss Bat.
<p>
Using a ten-leaf clover in Guano Junction will yield 2 sonar-in-a-biscuits.
<p>
Along the way, you will also want to adventure in the Beanbat chamber to get an enchanted bean for the Level 10 quest.
<b>Analysis</b><hr>
<br>
For purposes of this analysis (for now) we assume that obtaining stench resistance is trivial. If in a Bad Moon run or low-skill HC run, see the bottom of the page for potential in-run sources of stench resistance.
<p>

To complete this zone, either screambats need to be encountered which are scheduled to appear every 7 turns, with the exception of the first at 8 turns since the counter is 0 indexed, or enough sonar-in-a-biscuits are found, which are dropped in the zone.

<p>
As a result, maximizing item-drops is the key to speeding up this zone.
<p>

<b>Superlikely</b><p>
The screambat is a superlikely combat encounter that appears every 7 turns (8 for first) across turns spent in the entire Bat Hole.
<p>

<b>Strategy</b><hr>

There are a myriad of ways to complete this quest. <p>
Having as much +item drop is the key to getting sonars quickly. +100% is needed to cap the enchanted bean drop in the beanbat chamber.<p>
You can clover at guano junction to get 2 sonar-in-a-biscuit.<p>
If farming sonars, the batrat has the highest zone drop rate of 15%<p>
You can yellow ray the beanbat to get both the enchanted bean and the sonar<p>

By using a clover, and a yellow ray, you can open up the boss bat chamber in 2 turns. Whether this is a good use of resources is up to you, but the analysis below can help inform that decision.<br>

<p>

<b>Simulation</b><hr>

<b>Assumptions:</b><br>

The simulation takes the following steps to complete the quest:<br>
<ol>
	<li>
		Is the beanbat chamber open?
		<ol>
			<li>We have an enchanted bean</li>
			<ul>
			<li>With a ten-leaf clover, clover at guano junction.</li>
			<li>Otherwise, adventure at batrat burrow</li>
			</ul>
			<li>No enchanted bean</li>
			<ul>
			<li>Yellow Ray available? YR a beanbat</li>
			<li>No YR? Adventure at beanbat chamber</li>
			</ul>
		</ol>
	</li>
	<li>
		Is the batrat burrow open?
		<ul><li>Adventure at batrat burrow</li></ul>
	</li>
	<li>
		Only guano junction is open.
		<ul>
		<li>With a ten-leaf clover, clover at guano junction</li>
		<li>Otherwise, adventure at guano junction</li>
		</ul>
	</li>
</ol>

<ul>
<li>Screambats appear on the 8th turn, and then every 7 turns thereafter</li>
<li>4 beefy bodyguard bats are fought before the boss bat appears within the next 3 turns. Therefore, 5-7 turns uniformally distributed to complete the Boss Bat Lair</li>
</ul>
<br>

<br>
<b>Results</b>
<hr>

<p>

<div class = "table_container">
	<div id = "table_left" style="float:left; width: 50%">
	<b><u>Item Drop% & Expected Turns to Complete by Scenario</u></b>
	<span id = "if_turn_table"></span>
	</div>

	<div id = "table_right" style="float:right; width: 50%">
	<b><u>Turns saved with each resource</u></b>
	<span id = "resource_value_table"></span>
	</div>
</div>



<hr>

<b>Distribution Analysis</b>
<p>

<div id="id_dropdown"></div>
Clovers Used:
<select id = "num_clovers">
<option value = 0>0</option>
<option value = 1>1</option>
<option value = 2>2</option>
</select>
<br>
Yellow Ray?:
<select id = "use_yr">
<option value = "No">No</option>
<option value = "Yes">Yes</option>
</select>
<br>
Number of Simulations (recommend at least 100 000 but less than 1 000 000):
<input id = "dist_num_sims" type = "text" value = 100000>
<br>
<button onclick = "bh_run_dist_analysis()">Run Simulations!</button>
<br>
<!-- <div id="dist_hist_turns" style="float:left; height: 400"></div> -->
<div id="dist_hist_turns" height: 400"></div>

<p>
<b>Resources</b>
<hr>
<p>
In-run Stench Resistance
<ul>
<li>A Pine-Fresh air freshener can be found in the Entryway</li>
<li>the Pants of the Slug Lord from the Slug Lord's Map Quest</li>
<li>a bum cheet or asshat from the Sleazy Back Alley</li>
<li>Knob Goblin harem veil from the Harem</li>
</ul>
<p>
Standard sources of +item find may be useful as well
<p>
<b>Familiar Strategy</b>
<br>
Fairy type familiar to help cap sonars<br>
May want to use a lep familiar at the Boss Bat for extra meat.
<p>

<b>References</b><hr><br>
<a href="http://kol.coldfront.net/thekolwiki/index.php/The_Bat_Hole">KoL Wiki - The Bat Hole</a>
<br>
<br>
<!-- <script type="text/javascript" src="underscore-min.js"></script> -->
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="https://d3js.org/d3-array.v2.min.js"></script>

<script type="text/javascript" src="helper_functions.js"></script>
<script type="text/javascript" src="adventure.js"></script>
<script type="text/javascript" src="bat_hole.js"></script>
<br>
<i>Last updated on January 21, 2019</i>

</body>
</html>
